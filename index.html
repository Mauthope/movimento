<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejamento Logístico - Rebocador</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f4f4f9;
            color: #333;
        }
        h1, h2 {
            text-align: center;
            color: #4CAF50;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .section {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 300px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            text-align: center;
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background: #4CAF50;
            color: white;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <h1>Planejamento Logístico do Rebocador</h1>
    <div class="container">
        <!-- Entrada de Dados -->
        <div class="section">
            <h2>Configuração dos Setores</h2>
            <label for="imp-length">Comprimento de bobina (m) - Impressão:</label>
            <input type="number" id="imp-length" value="3000"><br><br>
            <label for="imp-speed">Velocidade de consumo (m/min) - Impressão:</label>
            <input type="number" id="imp-speed" value="212"><br><br>

            <label for="lam-length">Comprimento de bobina (m) - Laminação:</label>
            <input type="number" id="lam-length" value="2500"><br><br>
            <label for="lam-speed">Velocidade de consumo (m/min) - Laminação:</label>
            <input type="number" id="lam-speed" value="180"><br><br>

            <label for="cut-length">Comprimento de bobina (m) - Corte:</label>
            <input type="number" id="cut-length" value="2000"><br><br>
            <label for="cut-speed">Velocidade de consumo (m/min) - Corte:</label>
            <input type="number" id="cut-speed" value="150"><br><br>

            <label for="cycle-time">Tempo de ciclo do rebocador (min):</label>
            <input type="number" id="cycle-time" value="15"><br><br>
            
            <label for="rebocador-capacity">Capacidade do rebocador (bobinas):</label>
            <input type="number" id="rebocador-capacity" value="6"><br><br>

            <button onclick="simulate()">Simular</button>
        </div>

        <!-- Resultado -->
        <div class="section">
            <h2>Resultados</h2>
            <div id="results">
                <p>Preencha os campos e clique em "Simular".</p>
            </div>
        </div>
    </div>

    <script>
        function simulate() {
            // Dados de entrada
            const impLength = parseFloat(document.getElementById('imp-length').value);
            const impSpeed = parseFloat(document.getElementById('imp-speed').value);
            const lamLength = parseFloat(document.getElementById('lam-length').value);
            const lamSpeed = parseFloat(document.getElementById('lam-speed').value);
            const cutLength = parseFloat(document.getElementById('cut-length').value);
            const cutSpeed = parseFloat(document.getElementById('cut-speed').value);
            const cycleTime = parseFloat(document.getElementById('cycle-time').value);
            const rebocadorCapacity = parseFloat(document.getElementById('rebocador-capacity').value);

            // Consumo por máquina (bobinas/min)
            const impConsumption = 1 / (impLength / impSpeed) * 3; // 3 impressoras
            const lamConsumption = 1 / (lamLength / lamSpeed) * 4; // 4 laminadoras
            const cutConsumption = 1 / (cutLength / cutSpeed) * 2; // 2 cortes

            // Consumo total por minuto
            const totalDemand = impConsumption + lamConsumption + cutConsumption;

            // Capacidade do rebocador (bobinas/min)
            const rebocadorCapacityPerMinute = rebocadorCapacity / cycleTime;

            // Verificação de capacidade
            const resultsDiv = document.getElementById('results');
            if (totalDemand > rebocadorCapacityPerMinute) {
                resultsDiv.innerHTML = `
                    <p><strong>O rebocador não consegue atender à demanda total.</strong></p>
                    <p>Demanda total: ${totalDemand.toFixed(2)} bobinas/min</p>
                    <p>Capacidade do rebocador: ${rebocadorCapacityPerMinute.toFixed(2)} bobinas/min</p>
                `;
                return;
            }

            // Planejamento inicial das viagens
            let viagens = [];
            let reservas = { imp: 0, lam: 0, cut: 0 }; // Reservas iniciais

            for (let t = 0; t < 18 * 60; t += cycleTime) { // Ciclo de 18 horas
                let viagem = { imp: 0, lam: 0, cut: 0 };
                let remainingCapacity = rebocadorCapacity;

                // Impressão
                if (remainingCapacity > 0) {
                    let needed = Math.max(0, impConsumption * cycleTime - reservas.imp);
                    let bobinas = Math.min(remainingCapacity, Math.ceil(needed));
                    viagem.imp = bobinas;
                    reservas.imp += bobinas - impConsumption * cycleTime;
                    remainingCapacity -= bobinas;
                }

                // Laminação
                if (remainingCapacity > 0) {
                    let needed = Math.max(0, lamConsumption * cycleTime - reservas.lam);
                    let bobinas = Math.min(remainingCapacity, Math.ceil(needed));
                    viagem.lam = bobinas;
                    reservas.lam += bobinas - lamConsumption * cycleTime;
                    remainingCapacity -= bobinas;
                }

                // Corte
                if (remainingCapacity > 0) {
                    let needed = Math.max(0, cutConsumption * cycleTime - reservas.cut);
                    let bobinas = Math.min(remainingCapacity, Math.ceil(needed));
                    viagem.cut = bobinas;
                    reservas.cut += bobinas - cutConsumption * cycleTime;
                    remainingCapacity -= bobinas;
                }

                viagens.push({ ...viagem, reservas: { ...reservas } });
            }

            // Renderização dos resultados
            resultsDiv.innerHTML = `
                <p><strong>O rebocador atende à demanda.</strong></p>
                <p>Demanda total: ${totalDemand.toFixed(2)} bobinas/min</p>
                <p>Capacidade do rebocador: ${rebocadorCapacityPerMinute.toFixed(2)} bobinas/min</p>
                <table>
                    <tr>
                        <th>Viagem</th>
                        <th>Impressão</th>
                        <th>Laminação</th>
                        <th>Corte</th>
                        <th>Reserva (Imp)</th>
                        <th>Reserva (Lam)</th>
                        <th>Reserva (Cut)</th>
                    </tr>
                    ${viagens.map((v, i) => `
                        <tr>
                            <td>${i + 1}</td>
                            <td>${v.imp}</td>
                            <td>${v.lam}</td>
                            <td>${v.cut}</td>
                            <td>${v.reservas.imp.toFixed(2)}</td>
                            <td>${v.reservas.lam.toFixed(2)}</td>
                            <td>${v.reservas.cut.toFixed(2)}</td>
                        </tr>
                    `).join('')}
                </table>
            `;
        }
    </script>
</body>
</html>
