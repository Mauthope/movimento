<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejamento Logístico - Rebocador</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f4f4f9;
            color: #333;
        }
        h1, h2 {
            text-align: center;
            color: #4CAF50;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .section {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 300px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            text-align: center;
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background: #4CAF50;
            color: white;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .btn-group {
            display: flex;
            justify-content: space-around;
        }
    </style>
</head>
<body>
    <h1>Planejamento Logístico do Rebocador</h1>
    <div class="container">
        <!-- Entrada de Dados -->
        <div class="section">
            <h2>Configuração dos Setores</h2>
            <h3>Impressão</h3>
            <label for="imp-length">Comprimento de bobina (m):</label>
            <input type="number" id="imp-length" value="3000"><br><br>
            <label for="imp-speed">Velocidade de consumo (m/min):</label>
            <input type="number" id="imp-speed" value="212"><br><br>

            <h3>Laminação</h3>
            <label for="lam-length">Comprimento de bobina (m):</label>
            <input type="number" id="lam-length" value="2500"><br><br>
            <label for="lam-speed">Velocidade de consumo (m/min):</label>
            <input type="number" id="lam-speed" value="180"><br><br>

            <h3>Corte 1</h3>
            <label for="cut1-length">Comprimento de bobina (m):</label>
            <input type="number" id="cut1-length" value="2000"><br><br>
            <label for="cut1-speed">Velocidade de consumo (m/min):</label>
            <input type="number" id="cut1-speed" value="150"><br><br>

            <h3>Corte 2</h3>
            <label for="cut2-length">Comprimento de bobina (m):</label>
            <input type="number" id="cut2-length" value="2000"><br><br>
            <label for="cut2-speed">Velocidade de consumo (m/min):</label>
            <input type="number" id="cut2-speed" value="150"><br><br>

            <h3>Rebocador</h3>
            <label for="cycle-time">Tempo de ciclo (min):</label>
            <input type="number" id="cycle-time" value="15"><br><br>
            <label for="rebocador-capacity">Capacidade (bobinas):</label>
            <input type="number" id="rebocador-capacity" value="6"><br><br>

            <button onclick="simulate()">Simular</button>
        </div>

        <!-- Resultado -->
        <div class="section">
            <h2>Resultados</h2>
            <div id="results">
                <p>Preencha os campos e clique em "Simular".</p>
            </div>
        </div>
    </div>

   <script>
    let cronometroInterval;
    let startTime;
    let activeCronometer = null;
    const cycleTime = 5; // Tempo de ciclo do rebocador (exemplo: 5 minutos)

    function render() {
        const viagens = [
            { imp: 1, lam: 2, cut1: 3, cut2: 4, atendimento: '' },
            { imp: 1, lam: 2, cut1: 3, cut2: 4, atendimento: '' },
            // Adicione mais viagens aqui conforme necessário
        ];

        const tableHTML = `
            <table>
                <tr>
                    <th>Viagem</th>
                    <th>Impressão</th>
                    <th>Laminação</th>
                    <th>Corte 1</th>
                    <th>Corte 2</th>
                    <th>Atendimento</th>
                </tr>
                ${viagens.map((viagem, index) => `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${viagem.imp}</td>
                        <td>${viagem.lam}</td>
                        <td>${viagem.cut1}</td>
                        <td>${viagem.cut2}</td>
                        <td><button onclick="toggleCronometro(${index})">Atender</button></td>
                    </tr>
                `).join('')}
            </table>
        `;

        document.body.innerHTML = tableHTML;
    }

    function toggleCronometro(index) {
        const table = document.querySelector('table');
        const viagemRow = table.rows[index + 1];  // A primeira linha é o cabeçalho
        const atendimentoBtn = viagemRow.querySelector('button');

        if (activeCronometer === index) {
            // Finaliza o cronômetro
            clearInterval(cronometroInterval);
            const elapsed = (new Date().getTime() - startTime) / 60000; // Tempo em minutos
            const atendimentoCell = viagemRow.cells[5]; // Célula de atendimento (botão)
            atendimentoCell.textContent = `${elapsed.toFixed(2)} min`;  // Registra o tempo

            // Altera a cor da célula de atendimento
            if (elapsed > cycleTime) {
                atendimentoCell.style.backgroundColor = 'red'; // Maior que o ciclo
            } else {
                atendimentoCell.style.backgroundColor = 'green'; // Menor ou igual ao ciclo
            }

            // Reseta a variável ativa
            activeCronometer = null;
            atendimentoBtn.textContent = 'Atender'; // Volta para o texto original
        } else {
            if (activeCronometer !== null) {
                // Se já houver um cronômetro ativo, finaliza ele
                const prevViagemRow = table.rows[activeCronometer + 1];
                const prevBtn = prevViagemRow.querySelector('button');
                prevBtn.textContent = 'Atender'; // Restaura o botão para o texto original
                clearInterval(cronometroInterval);
            }

            // Inicia o cronômetro para a nova viagem
            atendimentoBtn.textContent = 'Finalizar Atendimento';
            activeCronometer = index;
            startTime = new Date().getTime(); // Inicia o cronômetro

            cronometroInterval = setInterval(() => {
                const elapsed = (new Date().getTime() - startTime) / 60000; // Tempo em minutos
                viagemRow.querySelector('td:nth-child(6)').textContent = `${elapsed.toFixed(2)} min`; // Atualiza o tempo na linha
            }, 1000);
        }
    }

    render();
</script>

</body>
</html>
