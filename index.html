<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejamento de Logística - Rebocador</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f4f4f9;
            color: #333;
        }
        h1, h2 {
            text-align: center;
            color: #4CAF50;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .section {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 300px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            text-align: center;
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background: #4CAF50;
            color: white;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <h1>Planejamento Logístico do Rebocador</h1>
    <div class="container">
        <!-- Entrada de Dados -->
        <div class="section">
            <h2>Configuração dos Setores</h2>
            <label for="imp-length">Comprimento de bobina (m) - Impressão:</label>
            <input type="number" id="imp-length" value="3000"><br><br>
            <label for="imp-speed">Velocidade de consumo (m/min) - Impressão:</label>
            <input type="number" id="imp-speed" value="212"><br><br>

            <label for="lam-length">Comprimento de bobina (m) - Laminação:</label>
            <input type="number" id="lam-length" value="2500"><br><br>
            <label for="lam-speed">Velocidade de consumo (m/min) - Laminação:</label>
            <input type="number" id="lam-speed" value="180"><br><br>

            <label for="cut1-consumption">Bobinas por hora - Corte 1:</label>
            <input type="number" id="cut1-consumption" value="2"><br><br>
            <label for="cut2-consumption">Bobinas por hora - Corte 2:</label>
            <input type="number" id="cut2-consumption" value="2"><br><br>

            <label for="f1-consumption">Bobinas por hora - F1:</label>
            <input type="number" id="f1-consumption" value="4"><br><br>

            <label for="cycle-time">Tempo de ciclo do rebocador (min):</label>
            <input type="number" id="cycle-time" value="15"><br><br>
            
            <label for="rebocador-capacity">Capacidade do rebocador (bobinas):</label>
            <input type="number" id="rebocador-capacity" value="6"><br><br>

            <button onclick="simulate()">Simular</button>
        </div>

        <!-- Resultado -->
        <div class="section">
            <h2>Resultados</h2>
            <div id="results">
                <p>Preencha os campos e clique em "Simular".</p>
            </div>
        </div>
    </div>

    <script>
        function simulate() {
            const impLength = parseFloat(document.getElementById('imp-length').value);
            const impSpeed = parseFloat(document.getElementById('imp-speed').value);
            const lamLength = parseFloat(document.getElementById('lam-length').value);
            const lamSpeed = parseFloat(document.getElementById('lam-speed').value);
            const cut1Consumption = parseFloat(document.getElementById('cut1-consumption').value) / 60;
            const cut2Consumption = parseFloat(document.getElementById('cut2-consumption').value) / 60;
            const f1Consumption = parseFloat(document.getElementById('f1-consumption').value) / 60;
            const cycleTime = parseFloat(document.getElementById('cycle-time').value);
            const rebocadorCapacity = parseFloat(document.getElementById('rebocador-capacity').value);

            // Cálculo da demanda de bobinas por minuto
            const impDemand = 1 / (impLength / impSpeed);
            const lamDemand = 1 / (lamLength / lamSpeed);

            // Demanda total de bobinas por minuto
            const totalDemand = impDemand + lamDemand + cut1Consumption + cut2Consumption + f1Consumption;

            // Capacidade do rebocador por minuto
            const rebocadorCapacityPerMinute = rebocadorCapacity / cycleTime;

            const resultsDiv = document.getElementById('results');

            if (totalDemand > rebocadorCapacityPerMinute) {
                resultsDiv.innerHTML = `
                    <p><strong>O rebocador não consegue atender à demanda total.</strong></p>
                    <p>Demanda total: ${totalDemand.toFixed(2)} bobinas/min</p>
                    <p>Capacidade do rebocador: ${rebocadorCapacityPerMinute.toFixed(2)} bobinas/min</p>
                `;
                return;
            }

            // Planejamento das viagens
            const totalCycles = Math.floor((18 * 60) / cycleTime);
            let viagens = [];

            for (let i = 0; i < totalCycles; i++) {
                let viagem = { imp: 0, lam: 0, cut1: 0, cut2: 0, f1: 0 };
                let remainingCapacity = rebocadorCapacity;

                if (remainingCapacity > 0 && impDemand > 0) {
                    viagem.imp++;
                    remainingCapacity--;
                }
                if (remainingCapacity > 0 && lamDemand > 0) {
                    viagem.lam++;
                    remainingCapacity--;
                }
                if (remainingCapacity > 0 && cut1Consumption > 0) {
                    viagem.cut1++;
                    remainingCapacity--;
                }
                if (remainingCapacity > 0 && cut2Consumption > 0) {
                    viagem.cut2++;
                    remainingCapacity--;
                }
                if (remainingCapacity > 0 && f1Consumption > 0) {
                    viagem.f1++;
                    remainingCapacity--;
                }

                viagens.push(viagem);
            }

            resultsDiv.innerHTML = `
                <p><strong>O rebocador atende à demanda.</strong></p>
                <p>Demanda total: ${totalDemand.toFixed(2)} bobinas/min</p>
                <p>Capacidade do rebocador: ${rebocadorCapacityPerMinute.toFixed(2)} bobinas/min</p>
                <table>
                    <tr>
                        <th>Viagem</th>
                        <th>Impressão</th>
                        <th>Laminação</th>
                        <th>Corte 1</th>
                        <th>Corte 2</th>
                        <th>F1</th>
                    </tr>
                    ${viagens.map((v, i) => `
                        <tr>
                            <td>${i + 1}</td>
                            <td>${v.imp}</td>
                            <td>${v.lam}</td>
                            <td>${v.cut1}</td>
                            <td>${v.cut2}</td>
                            <td>${v.f1}</td>
                        </tr>
                    `).join('')}
                </table>
            `;
        }
    </script>
</body>
</html>
